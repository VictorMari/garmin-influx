version: "3.9"
services:
  dashboard:
    image: "grafana/grafana-oss:latest"
    ports:
      - 3000:3000
    volumes:
      - ./config/grafana.ini:/etc/grafana/grafana.ini
      - ./config/dashboards:/var/lib/grafana/dashboards
      - ./config/datasources:/etc/grafana/datasources
      - ./config/plugins:/var/lib/grafana/plugins
      - grafana_data:/var/lib/grafana
    user: "104"
  influx:
    image: "influxdb:latest"
    volumes:
      - influx_data:/var/lib/influxdb2:rw
    ports:
      - 8086:8086
  scrapper:
    build: scrappers
    environment:
      - INFLUX_TOKEN
      - INFLUX_BUCKET
      - INFLUX_ORG
      - INFLUX_TICKS_BUCKET
  mongo:
    image: mongo:latest
    ports:
    - 27017:27017
    volumes:
    - app_data:/data/db

volumes:
    grafana_data: {}
    influx_data: {}
    app_data: {}
